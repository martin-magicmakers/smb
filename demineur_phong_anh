#Bien jou√© Phong Anh pour ce super projet ;)

import random

taille_grille = 6
nb_bombes = 4

# G√©n√©ration de toutes les coordonn√©es possibles de la grille

liste_cases = []
liste_lignes = range(taille_grille)
liste_colonnes = range(taille_grille)

for ligne in liste_lignes:
  for colonne in liste_colonnes:
    liste_cases.append((ligne, colonne))

liste_bombes = random.sample(liste_cases, nb_bombes)

cases_decouvertes = []

cases_marquees = []

emoji_nombre = ["0Ô∏è‚É£‚Äã","1Ô∏è‚É£","2Ô∏è‚É£","3Ô∏è‚É£","4Ô∏è‚É£","5Ô∏è‚É£","6Ô∏è‚É£","7Ô∏è‚É£","8Ô∏è‚É£"]

def compter_bombes_autour(ligne, colonne):

  compteur_bombes = 0

  for decalage_ligne in [-1, 0, 1]:
    for decalage_colonne in [-1, 0, 1]:
      case_voisine = (ligne + decalage_ligne, colonne + decalage_colonne)
      if case_voisine in liste_bombes:
        compteur_bombes += 1

  return compteur_bombes


def afficher_grille():

    print("\n   " + " ".join(str(i) for i in range(1,taille_grille+1)))
    print("  " + "--" * taille_grille)

    for ligne in range(taille_grille):
        texte_ligne = f"{ligne+1}|"
        for colonne in range(taille_grille):
          point = (ligne, colonne)

          if point in cases_decouvertes:
              if point in liste_bombes:
                  texte_ligne += "üí£"
              else:
                  nb = compter_bombes_autour(ligne, colonne)
                  texte_ligne += emoji_nombre[nb]

          # Case non d√©couverte mais marqu√©e par un drapeau
          elif point in cases_marquees:
              texte_ligne += "üö©"

          # Case encore cach√©e
          else:
              texte_ligne += "‚è∫Ô∏è‚Äã"

          texte_ligne += " "

        print(texte_ligne)


def jouer():

    print("üí£ Bienvenue dans le D√âMINEUR PHONG ANH !")
    print(f"Il y a {nb_bombes} bombes EXPLOSIFS cach√©es. √Ä toi de ne pas MOURRIR!\n")
    print("   Tape 'd' pour d√©couvrir une case, 'f' pour poser/retirer un drapeau.\n")

    while True:

        afficher_grille()

       
        if len(cases_decouvertes) == taille_grille * taille_grille - nb_bombes :
            print("üéâ Bravo ! TU AS DEMORCER UN BOMBE SANS VICTIME !")
            afficher_grille()
            break

        action = input("Action (d = d√©couvrir, f = drapeau) : ").strip().lower()
        if action not in ("d", "f"):
            print("‚õî Action invalide. Tape 'd' ou 'f'.")
            continue

        try:
            ligne = int(input("Choisis une ligne : "))
            colonne = int(input("Choisis une colonne : "))

        except ValueError:
            print("‚õî Entrez des nombres valides.")
            continue

        point = (ligne-1, colonne-1)
        if not (1 <= ligne < taille_grille +1 and 1 <= colonne < taille_grille+1):
            print("‚õî Coordonn√©es hors de la grille.")
            continue

        if action == "f":
            if point in cases_decouvertes:
                print("‚ö†Ô∏è Tu ne peux pas mettre de drapeau sur une case d√©j√† d√©couverte.")
                continue

            cases_marquees.append(point)
            print("‚úÖ Drapeau pos√©.")
            continue  


        if action == "d":
            if point in cases_marquees:
                print("‚ö†Ô∏è Cette case est marqu√©e par un drapeau. Retire-le d'abord si tu veux la d√©couvrir.")
                continue

            if point in cases_decouvertes:
                print("tu as d√©j√† d√©couvert cette case")
                continue

            # On r√©v√®le la case
            cases_decouvertes.append(point)

            # Si c'est une bombe ‚Üí d√©faite
            if point in liste_bombes:
                print("üí• LOSER BOU T ES NUL SALE NOOB")
                afficher_grille()
                print("üíÄ Partie termin√©e.")
                break


jouer()
